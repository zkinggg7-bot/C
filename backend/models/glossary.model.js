
const mongoose = require('mongoose');

const glossarySchema = new mongoose.Schema({
    novelId: { type: mongoose.Schema.Types.ObjectId, ref: 'Novel', required: true, index: true },
    term: { type: String, required: true }, // Ø§Ù„Ù…ØµØ·Ù„Ø­ Ø§Ù„Ø£ØµÙ„ÙŠ (Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)
    translation: { type: String, required: true }, // Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©
    category: { 
        type: String, 
        enum: ['characters', 'locations', 'items', 'ranks', 'other'], 
        default: 'other' 
    }, // ğŸ”¥ New: Category
    description: { type: String, default: '' }, // ğŸ”¥ New: Description (Identity/Role)
    autoGenerated: { type: Boolean, default: false } // Ù‡Ù„ ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠØŸ
}, { 
    timestamps: true,
    autoIndex: true // ÙŠØ¶Ù…Ù† Ø¨Ù†Ø§Ø¡ Ø§Ù„ÙÙ‡Ø§Ø±Ø³ Ø§Ù„Ù…Ø¹Ø±ÙØ© Ù‡Ù†Ø§
});

// Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ù†ÙØ³ Ø§Ù„Ù…ØµØ·Ù„Ø­ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø±ÙˆØ§ÙŠØ© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©
// Ù…Ø³Ù…ÙˆØ­ Ø¨Ù…ØµØ·Ù„Ø­Ø§Øª Ù…Ø®ØªÙ„ÙØ© Ù„Ù†ÙØ³ Ø§Ù„Ø±ÙˆØ§ÙŠØ©ØŒ ÙˆÙ…Ø³Ù…ÙˆØ­ Ø¨Ù†ÙØ³ Ø§Ù„Ù…ØµØ·Ù„Ø­ Ù„Ø±ÙˆØ§ÙŠØ§Øª Ù…Ø®ØªÙ„ÙØ©
glossarySchema.index({ novelId: 1, term: 1 }, { unique: true, background: true });

const Glossary = mongoose.model('Glossary', glossarySchema);
module.exports = Glossary;
